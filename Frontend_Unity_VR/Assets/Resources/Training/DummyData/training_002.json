{
  "moduleId": "VALVE_INSP_002",
  "title": "Industrial Valve Inspection & Calibration",
  "version": "1.0",
  "mode": "VR",
  "estimatedDurationMin": 20,
  "language": "en",
  "tasks": [
    {
      "taskId": 1,
      "taskTitle": "Task 1: Safety & Preparation",
      "steps": [
        {
          "stepId": 1,
          "title": "Introduction to Valve Inspection",
          "description": "This module covers the standard operating procedure for inspecting and calibrating industrial gate valves used in process piping systems.",
          "instructionType": "info",
          "media": {
            "type": "image",
            "path": "Prefabs/Media/testImage1"
          },
          "model": null,
          "interactions": null,
          "completionCriteria": {
            "type": "button_clicked",
            "value": "next"
          }
        },
        {
          "stepId": 2,
          "title": "Lockout / Tagout Procedure",
          "description": "Perform lockout/tagout (LOTO) on the upstream and downstream isolation valves before beginning inspection.",
          "instructionType": "safety",
          "media": {
            "type": "image",
            "path": "Prefabs/Media/testImage2"
          },
          "model": null,
          "interactions": {
            "requiredAction": "confirm_loto",
            "inputMethod": "ui_button",
            "target": null,
            "hand": null,
            "attemptsAllowed": 0
          },
          "completionCriteria": {
            "type": "user_confirmed",
            "value": "loto_complete"
          }
        },
        {
          "stepId": 3,
          "title": "Depressurize the Line",
          "description": "Open the bleed valve to release residual pressure from the line segment.",
          "instructionType": "action",
          "media": null,
          "model": {
            "path": "Prefabs/GLB/cube",
            "animation": "cubeanimation1",
            "spawn": {
              "position": [0, 0, 2],
              "rotation": [0, 180, 0],
              "scale": 1.0
            }
          },
          "interactions": {
            "requiredAction": "rotate_valve",
            "inputMethod": null,
            "target": "bleed_valve",
            "hand": "right",
            "attemptsAllowed": 0
          },
          "completionCriteria": {
            "type": "animation_completed",
            "value": "cubeanimation1"
          }
        }
      ]
    },
    {
      "taskId": 2,
      "taskTitle": "Task 2: Visual Inspection",
      "steps": [
        {
          "stepId": 4,
          "title": "Inspect Valve Body",
          "description": "Examine the valve body for corrosion, cracks, or signs of leakage around the flange faces.",
          "instructionType": "inspect",
          "media": {
            "type": "image",
            "path": "Prefabs/Media/testImage1"
          },
          "model": {
            "path": "Prefabs/GLB/cube",
            "animation": "cubeanimation2",
            "spawn": {
              "position": [0, 0, 2],
              "rotation": [0, 0, 0],
              "scale": 1.5
            }
          },
          "interactions": {
            "requiredAction": "gaze_focus",
            "inputMethod": null,
            "target": "valve_body",
            "hand": null,
            "attemptsAllowed": 0
          },
          "completionCriteria": {
            "type": "time_spent",
            "value": "6"
          }
        },
        {
          "stepId": 5,
          "title": "Inspection Decision",
          "description": "Based on the visual inspection, what is your assessment?",
          "instructionType": "question",
          "media": null,
          "model": null,
          "interactions": null,
          "completionCriteria": null,
          "choices": [
            { "label": "Valve body is in good condition — proceed to stem check", "goToStepId": 6 },
            { "label": "Minor corrosion found — document and proceed", "goToStepId": 6 },
            { "label": "Major damage found — skip to replacement", "goToStepId": 9 }
          ]
        },
        {
          "stepId": 6,
          "title": "Check Valve Stem & Packing",
          "description": "Inspect the valve stem for scoring or bending. Check the packing gland for leaks.",
          "instructionType": "inspect",
          "media": null,
          "model": {
            "path": "Prefabs/GLB/cube",
            "animation": "cubeanimation1",
            "spawn": {
              "position": [0, 0, 2],
              "rotation": [0, 180, 0],
              "scale": 1.2
            }
          },
          "interactions": {
            "requiredAction": "gaze_focus",
            "inputMethod": null,
            "target": "valve_stem,packing_gland",
            "hand": null,
            "attemptsAllowed": 0
          },
          "completionCriteria": {
            "type": "time_spent",
            "value": "5"
          }
        }
      ]
    },
    {
      "taskId": 3,
      "taskTitle": "Task 3: Calibration & Reassembly",
      "steps": [
        {
          "stepId": 7,
          "title": "Torque Test on Handwheel",
          "description": "Using the torque wrench, verify that the handwheel operates within the specified torque range (40-60 Nm).",
          "instructionType": "action",
          "media": null,
          "model": {
            "path": "Prefabs/GLB/cube",
            "animation": "cubeanimation2",
            "spawn": {
              "position": [0, 0, 2],
              "rotation": [0, 180, 0],
              "scale": 1.0
            }
          },
          "interactions": {
            "requiredAction": "grab_and_rotate",
            "inputMethod": null,
            "target": "handwheel",
            "hand": null,
            "attemptsAllowed": 3
          },
          "completionCriteria": {
            "type": "interaction_completed",
            "value": "grab_and_rotate"
          }
        },
        {
          "stepId": 8,
          "title": "Tighten Packing Gland",
          "description": "Tighten the packing gland nuts evenly to eliminate stem leakage.",
          "instructionType": "action",
          "media": null,
          "model": {
            "path": "Prefabs/GLB/cube",
            "animation": "cubeanimation1",
            "spawn": {
              "position": [0, 0, 2],
              "rotation": [0, 180, 0],
              "scale": 1.0
            }
          },
          "interactions": {
            "requiredAction": "grab_and_rotate",
            "inputMethod": null,
            "target": "packing_nut",
            "hand": null,
            "attemptsAllowed": 0
          },
          "completionCriteria": {
            "type": "animation_completed",
            "value": "cubeanimation1"
          }
        },
        {
          "stepId": 9,
          "title": "Inspection Complete",
          "description": "The valve inspection and calibration is now complete. Remove LOTO devices and return the system to service.",
          "instructionType": "completion",
          "media": {
            "type": "image",
            "path": "Prefabs/Media/testImage2"
          },
          "model": null,
          "interactions": null,
          "completionCriteria": {
            "type": "button_clicked",
            "value": "finish"
          }
        }
      ]
    }
  ]
}
